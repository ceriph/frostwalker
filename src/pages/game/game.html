<ion-content padding>
  <div class="wrapper" (tap)="onTap()" (swipeUp)="showTabs()" (swipeDown)="hideTabs()">
    <div class="content center">
      <div *ngFor="let item of items" [@fadeIn]>
        <div *ngIf="item.type === storyItemTypes.CHAPTER">
          <div class="font-large clear center spaced-large">{{chapterTitle(item.content)}}</div>
          <div class="clear spaced-border"></div>
          <div class="medium clear center spaced"><i>{{chapterContent(item.content)}}</i></div>
        </div>

        <div *ngIf="item.type === storyItemTypes.CHAPTER_END">
          <div class="font-large clear center spaced-large">Chapter End</div>
          <div class="clear spaced-border"></div>
          <div class="medium clear center spaced"><i>The following short advert helps ensure this game remains totally free.<br /><br /> Thank you for your attention, <br /> Matt</i></div>
          <button class="font-medium box clear center" (tap)="showAd()">I UNDERSTAND</button>
        </div>

        <div *ngIf="item.type === storyItemTypes.NARRATIVE">
          <div class="font-small box clear center spaced border-left border-right" [innerHtml]="parse(item.content)"></div>
        </div>

        <div class="clear left full spaced" *ngIf="item.type === storyItemTypes.DIALOGUE_NPC">
          <div class="indicator-left left"></div>
          <div class="font-small font-italic box left wide border-right" [innerHtml]="parse(item.content)"></div>
        </div>

        <div class="clear right full spaced" *ngIf="item.type === storyItemTypes.DIALOGUE_PC">
          <div class="indicator-right right"></div>
          <div class="font-small font-italic box right wide border-left" [innerHtml]="parse(item.content)"></div>
        </div>

        <ion-buttons *ngIf="item.type === storyItemTypes.CHOICE">
          <div class="font-medium info clear center spaced-large" [innerHtml]="choice.text"></div>
          <div class="clear spaced-border"></div>
          <button class="font-medium box clear center spaced" *ngFor="let option of choice.options" (tap)="makeChoice(option.name)">
            {{option.label}}
          </button>
        </ion-buttons>

        <div *ngIf="item.type === storyItemTypes.NAME">
          <label class="font-large spaced-large">ENTER NAME</label>
           <div class="clear spaced"></div>
           <div class="clear spaced-border"></div>
          <input class="font-medium box clear center spaced-large" type="text" name="name" maxlength="16" [(ngModel)]="character.name" (focus)="hideTabs()" (blur)="showTabs()">
          <div class="clear spaced-border"></div>
          <button class="font-medium box clear center" (tap)="acceptName()">ACCEPT</button>
        </div>

        <div class="font-large clear center spaced" *ngIf="item.type === storyItemTypes.END">
          {{item.content}}
        </div>

        <div *ngIf="item.type === storyItemTypes.TUTORIAL" class="font-medium clear center spaced" [innerHtml]="item.content"></div>
      </div>
    </div>
  </div>
</ion-content>
